{% extends 'base.html' %}

{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select Columns</title>
</head>
<body>
<div class="main">
<p class="page-header">Select Columns</p>
    <form action="/easyml/train/setup/create-data/" method="post">
    {% csrf_token %}
    <input type="text" name="file_id" value="{{ file_id }}" hidden>
    <table class="column-select-table left" style="border: 1px solid black; border-collapse: collapse;">
        <tr style="background-color: black; line-height: 30px; text-align: center;">
        {% for header in headers %}
            <th style="color: lightgrey">{{ header }}</th>
        {% endfor %}
        </tr>
        <tr>
            {% for header in headers %}
            <th style="padding: 15px">
                <select class="custom-select-type" name="{{ header }}">
                  <option value="ignore">Ignore</option>
                  <option value="input" selected>Input</option>
                  <option value="target">Target</option>
                </select>
            </th>
            {% endfor %}
        </tr>
    </table>
    <hr>
    <div style="float: left; width: 50%;">
        <h4>Select Algorithm: </h4>
        <select class="align-r custom-select-alg" name="algorithm" id="alg_select">
        {%  for alg in algorithms %}
            <option value="{{ alg.num }}">{{ alg.name }}</option>
        {% endfor %}
        </select>
        <br>
    </div>
    <div style="float:right; width: 50%;" id="alg_desc">
        <p id="alg_desc_p">
        Linear Regression is a method of modeling a linear relationship between dependent variables and independent variables.<br>This model is used for predicting numerical values for simple relationships.
        </p>
    </div>
    <hr>
    <div style="clear: both"></div>
    <div id="hyperparameters" style="display: block">
        <h4>Tune Parameters</h4>
        <table class="hp-table" id="linear_regression">
            <tr>
                <td>Fit Intercept</td>
                <td style="text-align: right"><label class="switch"><input type="checkbox" name="lr_fit_intercept" checked><span class="slider round"></span></label></td>
            </tr>
            <tr>
                <td>Normalize</td>
                <td style="text-align: right"><label class="switch"><input type="checkbox" name="lr_normalize"><span class="slider round"></span></label></td>
            </tr>
        </table>
        <hr>
    </div>
    <!--<img src="/easyml/data/render-plot/">!-->
    {% if graphic %}
        <img src="data:image/png;base64,{{ graphic }}" class="img-center"/>
    {% endif %}
    <input class="btn btn-primary" type="submit" value="Submit">
    </form>
</div>
</body>

<script>
    $.fn.multiline = function(text){
        this.text(text);
        this.html(this.html().replace(/\n/g,'<br/>'));
        return this;
    };

    $('#alg_select').change(function() {
        var alg_type = $("#alg_select option:selected").text();
        var text = "";
        if (alg_type === 'Linear Regression') {
            $('#hyperparameters').show();
            text = 'Linear Regression is a method of modeling a linear relationship between dependent variables and independent variables.\n' +
                'This model is used for predicting numerical values.';
        }
        else if (alg_type === 'Logistic Regression') {
            $('#hyperparameters').hide();
            text = 'Logistic Regression is a form of binomial regression used to classify samples from two different samples. When given more than two classes, this algorithm will default to softmax regression.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Linear Discriminant Analysis') {
            $('#hyperparameters').hide();
            text = 'Linear Discriminant Analysis (LDA) is a linear classifier much like logistic regression, but with some key differences. LDA is preferred over binary logistic regression when all requirements are met.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Decision Tree') {
            $('#hyperparameters').hide();
            text = 'Descision Tree learning uses a decision tree as a predictive model with conditionals.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Gaussian Naive Bayes') {
            $('#hyperparameters').hide();
            text = 'Naive Bayes classifiers are simple probabilistic models for predicting class based on Bayes\' theorem with a strong assumed correlation between features. Gaussian Naive Bayes uses a Gaussian distribution.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Random Forest Classifier') {
            $('#hyperparameters').hide();
            text = 'Random Forest algorithms construct many decision trees in order to combat overfitting. Random Forest Classifiers output the mode of the classes to make a categorical prediction.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Random Forest Regressor') {
            $('#hyperparameters').hide();
            text = 'Random Forest algorithms construct many decision trees in order to combat overfitting. Random Forest Regressors output the mean of the classes to make a numerical prediction.\n' +
                'This model is used for predicting numerical values.';
        }
        else if (alg_type === 'K Nearest Neighbors Classifier') {
            $('#hyperparameters').hide();
            text = 'K-Nearest Neighbors is a simple machine learning algorithm that calculates the values of the nearest k neighbors of a datapoint. The predicted class is the mode of the values of its nearest k neighbors\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'K Nearest Neighbors Regressor') {
            $('#hyperparameters').hide();
            text = 'K-Nearest Neighbors is a simple machine learning algorithm that calculates the values of the nearest k neighbors of a datapoint. The predicted class is the mean of the values of its nearest k neighbors\n' +
                'This model is used for predicting numerical values.';
        }
        else if (alg_type === 'Support Vector Machine Classifier') {
            $('#hyperparameters').hide();
            text = 'Support Vector Machine (SVM) models split the data into two distinct groups with as wide a gap as possible. They are most effective in a high-dimensional space.\n' +
                'This model is used for classifying samples.';
        }
        else if (alg_type === 'Support Vector Machine Regressor') {
            $('#hyperparameters').hide();
            text = 'Support Vector Machine (SVM) models split the data into two distinct groups with as wide a gap as possible. They are most effective in a high-dimensional space.\n' +
                'This model is used for predicting numerical values.';
        }
        else if (alg_type === 'Nearest Centroid') {
            $('#hyperparameters').hide();
            text = 'Nearest Centroid models assign the label of the training class with the mean closest to the observation.\n' +
                'This model is used for classifying samples.';
        }
        $('#alg_desc_p').multiline(text)

    });
</script>
{% endblock %}